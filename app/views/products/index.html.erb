<h1>Galactic Gaming</h1>
<h2>Products</h2>

<div class="search-form">
  <%= form_with(url: products_path, method: :get, local: true) do %>
    <div>
      <%= label_tag :search, "Search Products" %>
      <%= text_field_tag :search, params[:search], placeholder: "Enter keyword" %>
    </div>

    <div>
      <%= label_tag :category, "Filter by Category" %>
      <%= select_tag :category,
          options_for_select([["All Categories", "all"]] + @categories.map { |c| [c.name, c.id] }, selected: params[:category]),
          include_blank: false %>
    </div>

    <div>
      <%= submit_tag "Search", class: "btn btn-primary" %>
    </div>
  <% end %>
</div>

<div class="products">
  <% if @products.any? %>
    <% @products.each do |product| %>
      <div class="product">
        <%= link_to product_path(product) do %>
          <!-- image tag here -->
          <h3><%= product.name %></h3>
          <p><%= product.price %></p>
        <% end %>
        <!-- Add to Cart Button -->
        <%= form_with url: add_to_cart_cart_index_path, method: :post, local: true do %>
          <%= hidden_field_tag :product_id, product.id %> <!-- Product ID -->
          <%= number_field_tag :quantity, 1, min: 1, max: 100 %> <!-- Quantity input -->
          <%= submit_tag 'Add to Cart', class: 'btn btn-primary' %>
        <% end %>
      </div>
    <% end %>
  <% else %>
    <p>No products found.</p>
  <% end %>
</div>

<!-- Add pagination links -->
<div class="pagination">
  <%= paginate @products %>
</div>